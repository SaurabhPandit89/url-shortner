# URL Shortner

## Steps to Setup using Docker

* Install docker https://docs.docker.com/get-docker/
* Clone this repository
* CD into the project directory
* Run below commands and wait for them to finish.
  > `docker compose up -d`
  
  > `docker compose exec app bundle exec rails db:create`
  
  > `docker compose exec app bundle exec rails db:migrate`
* Access your app using http://localhost:3000 or http://0.0.0.0:3000


## Steps to Setup without Docker

* Make sure the system has ruby 2.7.0 installed, if not please install
* Make sure the system has MySQL server 8.0 or above is installed.
* Clone this repository
* CD into the project directory
* Run below commands
  > `bundle install`
  
  > `rails db:create`
  
  > `rails db:migrate`
  
* Set below env variables before starting rails server
  ```
  export set DB_HOST=127.0.0.1
  export set DB_USER=root
  export set DB_PASSWORD=Root@123
  ```
  > `rails s`
* Access your app using http://localhost:3000 or http://0.0.0.0:3000

## Available APIs

* Create User
  > `POST /api/v1/users`
  
  > request params: `email`, `password` & `password_confirmation`
  
  > response: `token` & `validity` of the token
  
* Retrieve user token (if expired, will generate a new token)
  > `POST /api/v1/retreive_token`
  
  > request params: `email` & `password`
  
  > response: `token` & `validity` of the token
  
* Create short URL
  > `POST /api/v1/urls`
  
  > request params: `token` & `url`
  
  > response: `short url` & `validity`
  
* List all URLs created by a user
  > `GET /api/v1/urls`
  
  > request params: `token`
  
  > response: `All the Short URLs` with `validty` generated by user
